<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Font Switch Test</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Qahiri&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Barrio&family=Barriecito&family=Baumans&family=Bungee+Inline&family=Londrina+Solid&family=Chango&family=Denk+One&family=Jacques+Francois+Shadow&family=Jaini&family=Moirai+One&family=Palette+Mosaic&family=Phudu&family=Pixelify+Sans&family=Silkscreen&family=VT323&family=Plaster&family=Rubik+Vinyl&family=Rubik+Glitch&family=Sedgwick+Ave+Display&family=Syncopate&family=Tapestry&family=Tilt+Prism&family=Shizuru&family=Sixtyfour&family=Special+Elite&family=Workbench&family=Yomogi&display=swap" rel="stylesheet" />

  <!-- FontFaceObserver -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.standalone.js"></script>

  <style>
    html, body {
      background: #000;
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    .random-font-text {
      position: absolute;
      top: 2%;
      left: 0;
      transform-origin: top left;
      transform: rotate(90deg) translateY(-2%);
      font-size: 33.33vh;
      color: #3d00ae;
      font-family: 'Qahiri', sans-serif;
      white-space: nowrap;
      transition: font-family 0.25s ease, filter 0.15s ease;
      font-weight: 400;
      filter: none;
    }

    .random-font-text.blur {
      filter: blur(5px);
    }
  </style>
</head>
<body>
  <div class="random-font-text">asherel</div>

  <script>
    const fonts = [
      'Barrio', 'Barriecito', 'Baumans', 'Bungee Inline', 'Londrina Solid',
      'Chango', 'Denk One', 'Jacques Francois Shadow', 'Jaini', 'Moirai One',
      'Palette Mosaic', 'Phudu', 'Pixelify Sans', 'Silkscreen', 'VT323',
      'Plaster', 'Qahiri', 'Rubik Vinyl', 'Rubik Glitch', 'Sedgwick Ave Display',
      'Syncopate', 'Tapestry', 'Tilt Prism', 'Shizuru', 'Sixtyfour', 'Special Elite',
      'Workbench', 'Yomogi'
    ];

    const textElement = document.querySelector('.random-font-text');
    let lastFont = null;
    let isChanging = false;
    let autoSwitchTimeout;

    function getRandomFont() {
      let font;
      do {
        font = fonts[Math.floor(Math.random() * fonts.length)];
      } while (font === lastFont);
      lastFont = font;
      return font;
    }

    function changeFontSmoothly() {
      if (isChanging) return;
      isChanging = true;
      textElement.classList.add('blur');

      const nextFont = getRandomFont();
      new FontFaceObserver(nextFont).load().then(() => {
        setTimeout(() => {
          textElement.style.fontFamily = `"${nextFont}", sans-serif`;
        }, 50);
        setTimeout(() => {
          textElement.classList.remove('blur');
          isChanging = false;
          scheduleNextFontChange();
        }, 150);
      }).catch(() => {
        console.warn(`Failed to load ${nextFont}`);
        textElement.classList.remove('blur');
        isChanging = false;
        scheduleNextFontChange();
      });
    }

    function scheduleNextFontChange() {
      clearTimeout(autoSwitchTimeout);
      autoSwitchTimeout = setTimeout(changeFontSmoothly, 5000);
    }

    window.addEventListener('load', () => {
      const initialFont = getRandomFont();
      textElement.style.fontFamily = `"${initialFont}", sans-serif`;
      scheduleNextFontChange();
    });

    textElement.addEventListener('mouseover', changeFontSmoothly);
  </script>
</body>
</html>
