<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Font Switch Test</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Qahiri&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Barrio&family=Barriecito&family=Baumans&family=Bungee+Inline&family=Londrina+Solid&family=Chango&family=Denk+One&family=Jacques+Francois+Shadow&family=Jaini&family=Moirai+One&family=Palette+Mosaic&family=Phudu&family=Pixelify+Sans&family=Silkscreen&family=VT323&family=Plaster&family=Rubik+Vinyl&family=Rubik+Glitch&family=Sedgwick+Ave+Display&family=Syncopate&family=Tapestry&family=Tilt+Prism&family=Shizuru&family=Sixtyfour&family=Special+Elite&family=Workbench&family=Yomogi&display=swap" rel="stylesheet" />

  <!-- FontFaceObserver -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.standalone.js"></script>

  <style>
    html, body {
      background: #000;
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    .random-font-text {
      position: absolute;
      top: 2%;
      left: 2%;
      transform-origin: top left;
      transform: rotate(90deg);
      font-size: 33.333vh; /* 1/3 of screen height */
      color: #3d00ae;
      font-family: 'Qahiri', sans-serif;
      white-space: nowrap;
      transition: font-family 0.25s ease, filter 0.15s ease;
      filter: none;
      font-weight: 400;
    }

    .random-font-text.blur {
      filter: blur(5px);
    }
  </style>
</head>
<body>
  <div class="random-font-text">asherel</div>

  <script>
    const fonts = [
      'Barrio', 'Barriecito', 'Baumans', 'Bungee Inline', 'Londrina Solid',
      'Chango', 'Denk One', 'Jacques Francois Shadow', 'Jaini', 'Moirai One',
      'Palette Mosaic', 'Phudu', 'Pixelify Sans', 'Silkscreen', 'VT323',
      'Plaster', 'Qahiri', 'Rubik Vinyl', 'Rubik Glitch', 'Sedgwick Ave Display',
      'Syncopate', 'Tapestry', 'Tilt Prism', 'Shizuru', 'Sixtyfour', 'Special Elite',
      'Workbench', 'Yomogi'
    ];

    const fontWidths = {
      'Barrio': 11, 'Barriecito': 9.3, 'Baumans': 8.75, 'Bungee Inline': 14, 'Londrina Solid': 8.3,
      'Chango': 14, 'Denk One': 9.75, 'Jacques Francois Shadow': 10.5, 'Jaini': 7.4, 'Moirai One': 11.385,
      'Palette Mosaic': 10.584, 'Phudu': 9.8, 'Pixelify Sans': 10.75, 'Silkscreen': 13.25, 'VT323': 7.75,
      'Plaster': 14, 'Qahiri': 6.138, 'Rubik Vinyl': 11.8, 'Rubik Glitch': 11.8, 'Sedgwick Ave Display': 9.25,
      'Syncopate': 16.25, 'Tapestry': 8.8, 'Tilt Prism': 10.908, 'Shizuru': 9.207, 'Sixtyfour': 19.15,
      'Special Elite': 10.89, 'Workbench': 9.8, 'Yomogi': 9.504
    };

    const textElement = document.querySelector('.random-font-text');
    let isFontChanging = false;
    let autoSwitchTimeout;
    let lastFont = null;

    fonts.forEach(font => {
      new FontFaceObserver(font).load().catch(() => {
        console.warn(`Failed to load ${font}`);
      });
    });

    function getRandomFont() {
      let font;
      do {
        font = fonts[Math.floor(Math.random() * fonts.length)];
      } while (font === lastFont);
      lastFont = font;
      return font;
    }

    function changeFontSmoothly() {
      if (isFontChanging) return;
      isFontChanging = true;
      textElement.classList.add('blur');

      const nextFont = getRandomFont();
      new FontFaceObserver(nextFont).load().then(() => {
        setTimeout(() => {
          textElement.style.fontFamily = `"${nextFont}", sans-serif`;
        }, 40);

        setTimeout(() => {
          textElement.classList.remove('blur');
          isFontChanging = false;
          scheduleNextFontChange();
        }, 100);
      }).catch(() => {
        console.warn(`Failed to load ${nextFont}`);
        textElement.classList.remove('blur');
        isFontChanging = false;
        scheduleNextFontChange();
      });
    }

    function scheduleNextFontChange() {
      clearTimeout(autoSwitchTimeout);
      autoSwitchTimeout = setTimeout(changeFontSmoothly, 5000);
    }

    window.addEventListener('load', () => {
      textElement.style.fontFamily = `"${getRandomFont()}", sans-serif`;
      scheduleNextFontChange();
    });

    textElement.addEventListener('mouseover', changeFontSmoothly);
  </script>
</body>
</html>
