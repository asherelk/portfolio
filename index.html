<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Font Switch Test</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Qahiri&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Barrio&family=Barriecito&family=Baumans&family=Bungee+Inline&family=Londrina+Solid&family=Chango&family=Denk+One&family=Jacques+Francois+Shadow&family=Jaini&family=Moirai+One&family=Palette+Mosaic&family=Phudu&family=Pixelify+Sans&family=Silkscreen&family=VT323&family=Plaster&family=Rubik+Vinyl&family=Rubik+Glitch&family=Sedgwick+Ave+Display&family=Syncopate&family=Tapestry&family=Tilt+Prism&family=Shizuru&family=Sixtyfour&family=Special+Elite&family=Workbench&family=Yomogi&display=swap" rel="stylesheet" />

  <!-- FontFaceObserver -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.1.0/fontfaceobserver.standalone.js"></script>

  <style>
    html, body {
      background: #000;
      margin: 0;
      padding: 0;
      color: #F6E6E1;
      font-family: 'Qahiri', sans-serif;
      overflow-x: hidden;
      overflow-y: auto;
      height: 100%;
    }

    .wrapper {
      position: fixed;
      top: 50%;
      left: 2%;
      transform: translateY(-50%);
      height: 33vh;
      display: flex;
      align-items: center;
      pointer-events: none;
      user-select: none;
      z-index: 10;
    }

    .random-font-text {
      font-size: 12vw;
      line-height: 1;
      color: #f36210;
      transition: font-family 0.25s ease, filter 0.15s ease;
      filter: none;
      white-space: nowrap;
      font-weight: 400 !important;
      -webkit-text-stroke: 0 !important;
      text-stroke: 0 !important;
      text-align: left;
      transform-origin: left center;
      transform: rotate(-90deg);
      pointer-events: auto;
      user-select: text;
    }

    .random-font-text.blur {
      filter: blur(5px);
    }

    #font-name-display {
      position: fixed;
      bottom: 2%;
      right: 2%;
      color: #f36210;
      font-family: 'Qahiri', sans-serif;
      font-size: 3vw;
      user-select: none;
      z-index: 20;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="random-font-text">Asherel's</div>
  </div>

  <div id="font-name-display">Loading font...</div>

  <script>
    const fonts = [
      'Barrio', 'Barriecito', 'Baumans', 'Bungee Inline', 'Londrina Solid',
      'Chango', 'Denk One', 'Jacques Francois Shadow', 'Jaini', 'Moirai One',
      'Palette Mosaic', 'Phudu', 'Pixelify Sans', 'Silkscreen', 'VT323',
      'Plaster', 'Qahiri', 'Rubik Vinyl', 'Rubik Glitch', 'Sedgwick Ave Display',
      'Syncopate', 'Tapestry', 'Tilt Prism', 'Shizuru', 'Sixtyfour', 'Special Elite',
      'Workbench', 'Yomogi'
    ];

    const fontWidths = {
      'Barrio': 11, 'Barriecito': 9.3, 'Baumans': 8.75, 'Bungee Inline': 14, 'Londrina Solid': 8.3,
      'Chango': 14, 'Denk One': 9.75, 'Jacques Francois Shadow': 10.5, 'Jaini': 7.4, 'Moirai One': 11.385,
      'Palette Mosaic': 10.584, 'Phudu': 9.8, 'Pixelify Sans': 10.75, 'Silkscreen': 13.25, 'VT323': 7.75,
      'Plaster': 14, 'Qahiri': 6.138, 'Rubik Vinyl': 11.8, 'Rubik Glitch': 11.8, 'Sedgwick Ave Display': 9.25,
      'Syncopate': 16.25, 'Tapestry': 8.8, 'Tilt Prism': 10.908, 'Shizuru': 9.207, 'Sixtyfour': 19.15,
      'Special Elite': 10.89, 'Workbench': 9.8, 'Yomogi': 9.504
    };

    const combinedBaselineShifts = {
      'Barrio': 2, 'Barriecito': 0, 'Baumans': 0, 'Bungee Inline': 0, 'Londrina Solid': 0,
      'Chango': -1, 'Denk One': -2, 'Jacques Francois Shadow': -1, 'Jaini': -1, 'Moirai One': -3,
      'Palette Mosaic': -3, 'Phudu': -2, 'Pixelify Sans': 1, 'Silkscreen': 0, 'VT323': 2,
      'Plaster': 0, 'Qahiri': 5.25, 'Rubik Vinyl': -1, 'Rubik Glitch': 0, 'Sedgwick Ave Display': 4,
      'Syncopate': 1, 'Tapestry': 1, 'Tilt Prism': 0, 'Shizuru': -7, 'Sixtyfour': 0,
      'Special Elite': 6, 'Workbench': 0, 'Yomogi': -3
    };

    const combinedHorizontalShifts = {
      'Barrio': 0.7, 'Barriecito': -0.2, 'Baumans': -1.1, 'Bungee Inline': 2, 'Londrina Solid': -1.45,
      'Chango': 2.05, 'Denk One': -0.1, 'Jacques Francois Shadow': 0.1, 'Jaini': -2.6, 'Moirai One': 0.5,
      'Palette Mosaic': 0, 'Phudu': -0.1, 'Pixelify Sans': 0.1, 'Silkscreen': 1.2, 'VT323': -2,
      'Plaster': 1.6, 'Qahiri': -4.25, 'Rubik Vinyl': 1.1, 'Rubik Glitch': 1.1, 'Sedgwick Ave Display': 0.2,
      'Syncopate': 2.6, 'Tapestry': -0.7, 'Tilt Prism': 1, 'Shizuru': -0.5, 'Sixtyfour': 3.15,
      'Special Elite': 0.35, 'Workbench': -0.15, 'Yomogi': -0.2
    };

    const targetWidth = 6.2;
    const baseTranslateY = 23;

    const textElement = document.querySelector('.random-font-text');
    const fontNameDisplay = document.getElementById('font-name-display');
    let isFontChanging = false;
    let autoSwitchTimeout;
    let lastChangeTime = 0;
    let lastFont = null;

    fonts.forEach(font => {
      new FontFaceObserver(font).load().catch(() => {
        console.warn(`Failed to load ${font}`);
      });
    });

    function getRandomFont() {
      let font;
      do {
        font = fonts[Math.floor(Math.random() * fonts.length)];
      } while (font === lastFont);
      lastFont = font;
      return font;
    }

    function updateFontName(name) {
      fontNameDisplay.textContent = `Font: ${name}`;
    }

    function changeFontSmoothly() {
      const now = Date.now();
      if (isFontChanging || now - lastChangeTime < 300) return;

      isFontChanging = true;
      textElement.classList.add('blur');

      const nextFont = getRandomFont();

      new FontFaceObserver(nextFont).load().then(() => {
        setTimeout(() => {
          textElement.style.fontFamily = `"${nextFont}", sans-serif`;

          const measuredWidth = fontWidths[nextFont] || targetWidth;
          const scaleX = targetWidth / measuredWidth;
          const shiftY = baseTranslateY + (combinedBaselineShifts[nextFont] || 0);
          const shiftX = combinedHorizontalShifts[nextFont] || 0;

          // We keep rotation -90deg and reset translate for simplicity
          textElement.style.transform = `rotate(-90deg) translate(0, 0) scaleX(${scaleX.toFixed(3)})`;

          updateFontName(nextFont);
        }, 40);

        setTimeout(() => {
          textElement.classList.remove('blur');
          isFontChanging = false;
          lastChangeTime = Date.now();
          scheduleNextFontChange();
        }, 100);
      }).catch(() => {
        console.warn(`Failed to load ${nextFont}`);
        textElement.classList.remove('blur');
        isFontChanging = false;
        lastChangeTime = Date.now();
        scheduleNextFontChange();
      });
    }

    function scheduleNextFontChange() {
      clearTimeout(autoSwitchTimeout);
      autoSwitchTimeout = setTimeout(changeFontSmoothly, 5000);
    }

    window.addEventListener('load', () => {
      const initialFont = getRandomFont();
      textElement.style.fontFamily = `"${initialFont}", sans-serif`;
      const initialWidth = fontWidths[initialFont] || targetWidth;
      const scaleX = targetWidth / initialWidth;
      const shiftY = baseTranslateY + (combinedBaselineShifts[initialFont] || 0);
      const shiftX = combinedHorizontalShifts[initialFont] || 0;
      textElement.style.transform = `rotate(-90deg) translate(0, 0) scaleX(${scaleX.toFixed(3)})`;

      updateFontName(initialFont);

      scheduleNextFontChange();
    });

    textElement.addEventListener('mouseover', changeFontSmoothly);
  </script>
</body>
</html>
